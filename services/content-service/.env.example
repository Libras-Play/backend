# =============================================================================
# Content Service - Environment Variables
# =============================================================================
# 
# Copiar este archivo a .env.local para desarrollo local
# Para otros ambientes, crear .env.dev, .env.staging, .env.production
#
# =============================================================================

# -----------------------------------------------------------------------------
# 1. Application Settings
# -----------------------------------------------------------------------------

# Application environment (development, staging, production)
APP_ENV=development

# API configuration
API_HOST=0.0.0.0
API_PORT=8001
API_RELOAD=true

# CORS configuration (comma-separated origins)
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# 2. PostgreSQL Database (Content Storage)
# -----------------------------------------------------------------------------

# Database credentials
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=content_db
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# Connection pool settings (SQLAlchemy)
POSTGRES_POOL_SIZE=10
POSTGRES_MAX_OVERFLOW=20
POSTGRES_POOL_TIMEOUT=30

# Full database URL (auto-constructed if not set)
# Format: postgresql+asyncpg://user:password@host:port/database
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/content_db

# -----------------------------------------------------------------------------
# 3. AWS Configuration (for cross-service communication)
# -----------------------------------------------------------------------------

# AWS region
AWS_REGION=us-east-1

# AWS credentials (use IAM roles in production, hardcode only for LocalStack)
# Leave empty in production to use instance role
AWS_ACCESS_KEY_ID=test
AWS_SECRET_ACCESS_KEY=test

# AWS endpoint override (for LocalStack)
# Comment out for real AWS
AWS_ENDPOINT_URL=http://localhost:4566

# -----------------------------------------------------------------------------
# 4. DynamoDB Tables (for cross-service data)
# -----------------------------------------------------------------------------

# User data table (reference only, managed by user-service)
DYNAMODB_TABLE_USER_DATA=UserData

# Progress tracking table (if needed)
DYNAMODB_TABLE_USER_PROGRESS=UserProgress

# -----------------------------------------------------------------------------
# 5. S3 Buckets
# -----------------------------------------------------------------------------

# Content assets bucket (images, videos, PDFs)
S3_BUCKET_CONTENT_ASSETS=aplicacion-senas-content-assets

# User uploads bucket (if content-service handles uploads)
S3_BUCKET_USER_UPLOADS=aplicacion-senas-user-uploads

# -----------------------------------------------------------------------------
# 6. Authentication (JWT)
# -----------------------------------------------------------------------------

# JWT secret key (CHANGE IN PRODUCTION!)
JWT_SECRET_KEY=your-secret-key-change-in-production-min-32-chars

# JWT algorithm
JWT_ALGORITHM=HS256

# Token expiration (in minutes)
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_MINUTES=10080

# -----------------------------------------------------------------------------
# 7. Alembic Migrations
# -----------------------------------------------------------------------------

# Alembic uses DATABASE_URL from above
# No additional config needed

# -----------------------------------------------------------------------------
# 8. Rate Limiting (optional)
# -----------------------------------------------------------------------------

# Requests per minute per IP
RATE_LIMIT_PER_MINUTE=60

# Burst allowance
RATE_LIMIT_BURST=10

# -----------------------------------------------------------------------------
# 9. Caching (optional - Redis)
# -----------------------------------------------------------------------------

# Redis configuration (if using cache)
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_DB=0
# REDIS_PASSWORD=
# CACHE_TTL=3600

# -----------------------------------------------------------------------------
# 10. Monitoring & Observability
# -----------------------------------------------------------------------------

# Sentry DSN (error tracking)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Enable metrics endpoint
ENABLE_METRICS=true

# Health check interval (seconds)
HEALTH_CHECK_INTERVAL=60

# -----------------------------------------------------------------------------
# 11. Feature Flags
# -----------------------------------------------------------------------------

# Enable AI-powered content recommendations
ENABLE_AI_RECOMMENDATIONS=false

# Enable content versioning
ENABLE_CONTENT_VERSIONING=true

# Enable audit logging
ENABLE_AUDIT_LOGS=true

# -----------------------------------------------------------------------------
# 12. Integration with Other Services
# -----------------------------------------------------------------------------

# User service URL (for user data validation)
USER_SERVICE_URL=http://localhost:8002

# ML service URL (for content difficulty assessment)
ML_SERVICE_URL=http://localhost:8003

# -----------------------------------------------------------------------------
# 13. Development Tools
# -----------------------------------------------------------------------------

# Enable debug mode (shows stack traces)
DEBUG=true

# Enable hot reload
RELOAD=true

# Enable API documentation
ENABLE_DOCS=true

# Swagger UI path
DOCS_URL=/docs

# ReDoc UI path
REDOC_URL=/redoc

# -----------------------------------------------------------------------------
# 14. Testing (for test environment)
# -----------------------------------------------------------------------------

# Test database (separate from development)
# TEST_DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/content_db_test

# Use in-memory database for tests
# TEST_USE_IN_MEMORY_DB=true

# -----------------------------------------------------------------------------
# 15. Security
# -----------------------------------------------------------------------------

# Allowed hosts (comma-separated)
ALLOWED_HOSTS=localhost,127.0.0.1

# Enable HTTPS redirect
FORCE_HTTPS=false

# CSRF protection
ENABLE_CSRF=true

# Maximum request size (in MB)
MAX_REQUEST_SIZE_MB=10

# -----------------------------------------------------------------------------
# NOTES
# -----------------------------------------------------------------------------
#
# LOCAL DEVELOPMENT (LocalStack):
#   - Use AWS_ENDPOINT_URL=http://localhost:4566
#   - Use AWS_ACCESS_KEY_ID=test, AWS_SECRET_ACCESS_KEY=test
#   - PostgreSQL on localhost:5432
#
# AWS DEVELOPMENT:
#   - Remove AWS_ENDPOINT_URL
#   - Use IAM instance role (remove AWS_ACCESS_KEY_ID/SECRET)
#   - Use RDS endpoint for POSTGRES_HOST
#   - Store secrets in AWS Secrets Manager
#
# AWS PRODUCTION:
#   - NEVER commit .env.production to git
#   - Use AWS Secrets Manager for all secrets
#   - Use Parameter Store for non-sensitive config
#   - Enable encryption at rest for RDS
#   - Use VPC security groups for network isolation
#
# -----------------------------------------------------------------------------
